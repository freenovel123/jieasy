import{f as k,V as C,g as u,m as c,l as N,r as h,o as p,c as S,a as d,w as j,b as A,_ as $,h as D,N as V,M as E,H as U}from"./index--TtAS5k8.js";import{S as H}from"./index-Hi3OqBGe.js";const J={class:"steve-dialog-ace"},R={class:"steve-dialog-ace__editor"},z=k({__name:"index",props:{visible:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["update:visible","confirm"],setup(m,{emit:f}){const _=m,{visible:g,value:x}=C(_),a=f,s=u(!1);c(g,n=>{s.value=n}),c(s,n=>{a("update:visible",n)});const i=N(()=>window.innerHeight/1.5),o=u("");c(x,n=>{o.value=n});const b=()=>{console.log(o.value),a("confirm",o.value)};return(n,v)=>{const l=h("t-dialog");return p(),S("div",J,[d(l,{visible:s.value,"onUpdate:visible":v[1]||(v[1]=r=>s.value=r),header:!1,width:"80%",placement:"center","close-on-overlay-click":!1,"close-btn":!1,onConfirm:b},{default:j(()=>[A("div",R,[d(H,{value:o.value,"onUpdate:value":v[0]||(v[0]=r=>o.value=r),height:i.value,lang:"javascript"},null,8,["value","height"])])]),_:1},8,["visible"])])}}}),I=$(z,[["__scopeId","data-v-59ccb15f"]]),O={class:"steve-textarea"},M={key:0,class:"editor"},Q=k({__name:"index",props:{value:{type:String,default:""}},emits:["update:value"],setup(m,{emit:f}){const _=m,{value:g}=C(_),x=f,a=u("");c(a,t=>{x("update:value",t)}),c(g,t=>{a.value=t,r()});const s=u(!1),i=u(!1),o=u(""),b=t=>{let e="";l.value.type===0?e=`@js:
${t}`:l.value.type===1?e=`<js>
${t}
</js>`:e=t,l.value.regex?a.value=a.value.replace(l.value.regex,e):a.value=e,s.value=!1},n=()=>{if(l.value)if(l.value.type===2)o.value=a.value;else{const t=a.value.match(l.value.regex);t!==null&&(o.value=`${t[1]}`.trim())}s.value=!0},v=u([{name:"前缀JS",type:0,regex:/@js:([\s\S]*?)$/},{name:"标签JS",type:1,regex:/<js>([\s\S]*?)<\/js>/},{name:"json",type:2,regex:null}]),l=u({name:"",type:0,regex:null}),r=()=>{var t;i.value=!1;for(const e of v.value)if(e.type!==2&&e.regex){if((t=e.regex)!=null&&t.test(a.value)){l.value=e,i.value=!0;break}}else if(U.isJSON(a.value)){l.value=e,i.value=!0;break}};return(t,e)=>{const w=h("t-button"),B=h("t-textarea");return p(),S("div",O,[i.value?(p(),S("div",M,[d(w,{size:"small",onClick:n},{default:j(()=>[d(D,{name:"code"})]),_:1})])):V("",!0),d(B,{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=y=>a.value=y),autosize:!0,onChange:r},null,8,["modelValue"]),a.value?(p(),E(I,{key:1,visible:s.value,"onUpdate:visible":e[1]||(e[1]=y=>s.value=y),value:o.value,onConfirm:b},null,8,["visible","value"])):V("",!0)])}}}),F=$(Q,[["__scopeId","data-v-432b0a12"]]);export{F as S};
