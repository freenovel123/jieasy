import{f as I,V as N,m as v,g as c,F as a,u as x,r as u,o as A,c as L,a as s,w as i,d as y,t as g,_ as V}from"./index-CgOOQVTy.js";import{i as z,j as E}from"./api-BvGUst0c.js";const R={class:"list-common-table"},T=I({__name:"list",props:{keyword:{type:String,default:""},groupId:{type:Number,default:0}},setup(h){const k=h,{keyword:d,groupId:p}=N(k);v(d,()=>{r()}),v(p,()=>{r()});const l=c(),w=c([{colKey:"id",title:"ID",width:"80",sorter:!0},{colKey:"version",title:a("pages.source.table.version"),width:"100"},{colKey:"siteName",title:a("pages.source.table.siteName")},{colKey:"url",title:a("pages.source.table.url")},{colKey:"time",title:a("createTime"),width:"200"},{colKey:"operation",title:a("operation"),width:"200",fixed:"right"}]),m=c({defaultCurrent:1,defaultPageSize:50,total:0}),t=c({sortBy:"id",descending:!0}),_=e=>{e&&(t.value=e),l.value=l.value.concat().sort((o,n)=>t.value.descending?n[t.value.sortBy]-o[t.value.sortBy]:o[t.value.sortBy]-n[t.value.sortBy])},C=x(),S=e=>{C.push(`/source/edit?id=${e.id}`)},B=e=>{E(e.id).then(o=>{o&&r()})};function r(){z({keyword:d.value,groupId:p.value}).then(e=>{l.value=e,_(""),m.value.total=e.length})}return r(),(e,o)=>{const n=u("t-link"),b=u("t-popconfirm"),D=u("t-space"),K=u("t-table");return A(),L("div",R,[s(K,{"row-key":"index",sort:t.value,data:l.value,columns:w.value,pagination:m.value,"cell-empty-content":"-",hover:"","lazy-load":"",onSortChange:_},{operation:i(({row:f})=>[s(D,null,{default:i(()=>[s(n,{theme:"primary",onClick:$=>S(f)},{default:i(()=>[y(g(e.$t("edit")),1)]),_:2},1032,["onClick"]),s(b,{content:e.$t("confirmDelete"),onConfirm:$=>B(f)},{default:i(()=>[s(n,{theme:"primary"},{default:i(()=>[y(g(e.$t("delete")),1)]),_:1})]),_:2},1032,["content","onConfirm"])]),_:2},1024)]),_:1},8,["sort","data","columns","pagination"])])}}}),P=V(T,[["__scopeId","data-v-1da4497c"]]);export{P as default};
