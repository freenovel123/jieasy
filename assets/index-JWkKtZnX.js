import{f as V,Y as w,g as n,m as c,l as B,r as y,o as m,c as h,a as d,w as k,b as A,_ as C,h as E,N as S,M as N,H as D}from"./index-opJMMxrH.js";import{S as R}from"./index-CQX5SaM7.js";const U={class:"steve-dialog-ace"},H={class:"steve-dialog-ace__editor"},J=V({__name:"index",props:{visible:{type:Boolean,default:!1},value:{type:String,default:""}},emits:["update:visible","confirm"],setup(f,{emit:_}){const p=f,{visible:g,value:t}=w(p),u=_,l=n(!1);c(g,o=>{l.value=o}),c(l,o=>{u("update:visible",o)});const v=B(()=>window.innerHeight/1.5),i=n("");c(t,o=>{i.value=o});const x=()=>{console.log(i.value),u("confirm",i.value)};return(o,a)=>{const r=y("t-dialog");return m(),h("div",U,[d(r,{visible:l.value,"onUpdate:visible":a[1]||(a[1]=e=>l.value=e),header:!1,width:"80%",placement:"center","close-on-overlay-click":!1,"close-btn":!1,onConfirm:x},{default:k(()=>[A("div",H,[d(R,{value:i.value,"onUpdate:value":a[0]||(a[0]=e=>i.value=e),height:v.value,lang:"javascript"},null,8,["value","height"])])]),_:1},8,["visible"])])}}}),z=C(J,[["__scopeId","data-v-59ccb15f"]]),I={class:"steve-textarea"},O={key:0,class:"editor"},M=V({__name:"index",props:{value:{type:String,default:""}},emits:["update:value"],setup(f,{emit:_}){const p=f,g=_,t=n(p.value);c(t,e=>{g("update:value",e)}),c(()=>p.value,e=>{t.value=e,r()});const u=n(!1),l=n(!1),v=n(""),i=e=>{let s="";a.value.type===0?s=`@js:
${e}`:a.value.type===1?s=`<js>
${e}
</js>`:s=e,a.value.regex?t.value=t.value.replace(a.value.regex,s):t.value=s,u.value=!1},x=()=>{if(a.value)if(a.value.type===2)v.value=t.value;else{const e=t.value.match(a.value.regex);e!==null&&(v.value=`${e[1]}`.trim())}u.value=!0},o=n([{name:"前缀JS",type:0,regex:/@js:([\s\S]*?)$/},{name:"标签JS",type:1,regex:/<js>([\s\S]*?)<\/js>/},{name:"json",type:2,regex:null}]),a=n({name:"",type:0,regex:null}),r=()=>{l.value=!1;for(const e of o.value)if(e.type!==2&&e.regex){if(new RegExp(e.regex).test(t.value)){a.value=e,l.value=!0;break}}else if(D.isJSON(t.value)){a.value=e,l.value=!0;break}};return r(),(e,s)=>{const j=y("t-button"),$=y("t-textarea");return m(),h("div",I,[l.value?(m(),h("div",O,[d(j,{size:"small",onClick:x},{default:k(()=>[d(E,{name:"code"})]),_:1})])):S("",!0),d($,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=b=>t.value=b),autosize:!0,onChange:r},null,8,["modelValue"]),l.value?(m(),N(z,{key:1,visible:u.value,"onUpdate:visible":s[1]||(s[1]=b=>u.value=b),value:v.value,onConfirm:i},null,8,["visible","value"])):S("",!0)])}}}),Y=C(M,[["__scopeId","data-v-d1c138a4"]]);export{Y as S};
